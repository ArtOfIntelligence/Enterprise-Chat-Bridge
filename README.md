#  Enterprise Chat Bridge  
ECB is a middleware chat engine with **[Push]** to clients.
It fits between your web server and your we application. 
#### Server
##### Protocols: REST API
Because ECB uses REST API only to communicate with your server, you can easily embed it to your existing solution such as ASP.<span></span>NET, Nodejs, PHP etc.
Alternatively, you can build a tiny backend server to communicate with ECB.* 
#### Client
##### Protocols: REST API and WebSockets
ECB is built to work with browser clients (web). It uses Socket.<span></span>IO, which is built on the top of WebSockets. Yet, Socket.<span></span>IO falls back to http, so it supports all browsers modern and old.  
  
##  How does it work?
###  Architecture
This is how it fits in your solution:
![Simple Architecture](./imgs/simple-arch.svg)

####  Authentication
1. Your server generates access token to each client
1. Client receives access token and uses it to connect to ECB (All client's communication henceforth is handled by ECB)

####  Messaging
1. Client 2 sends a message
2. ECB forwards the message to your server (for storage) and returns **ack**
3. ECB sends **ack** to Client 2
4. <ins>ECB **pushes** message to Client 1</ins> 

##  Terminology
|Term|Meaning|
|--|--|
|Access Token|A string token generated by your server and sent to your client. The access token is later sent from your client to ECB for authentication.|
|Thread|A thread is a conversation, each collection of messages is linked (or grouped) under a single thread.|
|Message|A message is the smallest building block of your chat solution|

## Security
ECB itself is sessionless, and does not requrie sessions on your server either. Instead, it uses JWT (JSON Web Tokens) for every connected user and for every thread.

### Keys
You will generate a new RS256 key pair:
Your server will store the private key to encrypt and verify and decode tokens. 
ECB and your client will store the private key and use it to verify and decode token. 

## Integration Libraries
While you can implement your server and client from scratch, it's highly recommended to use our integration libraries; they are faster to integrate, and thoroughly tested. 
### Server
- ASP.<span>NET (Nuget Package): [https://www.nuget.org/packages/EnterpriseChatBridgeClient/](https://www.nuget.org/packages/EnterpriseChatBridgeClient/) 
```nuget install EnterpriseChatBridgeAdapter```

### Client
- JavaScript with Typescript support (NPM): [https://www.npmjs.com/package/ecb-client-js](https://www.npmjs.com/package/ecb-client-js)
```npm install ecb-client-js```

## Implementation 
1. Implement ECB backend server
2. Download, configure and start ECB
3. Embed ECB client in your web application

##  Cross-browser Support
Socket.<span></span>IO Browser support is tested in Saucelabs:
[![Sauce Test Status](https://saucelabs.com/browser-matrix/socket.svg)](https://saucelabs.com/u/socket)